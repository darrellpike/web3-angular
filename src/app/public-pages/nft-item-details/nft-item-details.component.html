<section aria-label="section" class="mt90 sm-mt-0">
  <div class="container" *ngIf="item">
    <div class="row">
      <div class="col-md-6 text-center">
        <img [src]="'/assets/images/items/big-4.jpg'" class="img-fluid img-rounded mb-sm-30" alt="">
      </div>
      <div class="col-md-6">
        <div class="item_info">
          Auctions ends in <div class="de_countdown" data-year="2022" data-month="4" data-day="16" data-hour="8"></div>
          <h2>{{ item.title }}</h2>
          <div class="item_info_counts">
            <div class="item_info_type"><i class="fa fa-image"></i>[Art]</div>
            <div class="item_info_views"><i class="fa fa-eye"></i>[250]</div>
            <div class="item_info_like"><i class="fa fa-heart"></i>{{ item.likes }}</div>
          </div>
          <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>

          <div class="d-flex flex-row">
            <div class="mr40">
              <h6>Creator</h6>
              <div class="item_author">
                <div class="author_list_pp">
                  <a [routerLink]="['/', routePaths.User, item.author.data.userId]">
                    <img class="lazy" [src]="item.author.avatar" alt="">
                    <i class="fa fa-check"></i>
                  </a>
                </div>
                <div class="author_list_info">
                  <a [routerLink]="['/', routePaths.User, item.author.data.userId]">{{ item.author.name }}</a>
                </div>
              </div>
            </div>
            <div *ngIf="item.collection">
              <h6>Collection</h6>
              <div class="item_author">
                <div class="author_list_pp">
                  <a [routerLink]="['/', routePaths.Collection, item.collection.id]">
                    <img class="lazy" [src]="'/assets/images/collections/' + item.collection.image" alt="">
                    <i class="fa fa-check"></i>
                  </a>
                </div>
                <div class="author_list_info">
                  <a [routerLink]="['/', routePaths.Collection, item.collection.id]">{{ item.collection.name}}</a>
                </div>
              </div>
            </div>
          </div>

          <div class="spacer-40"></div>

          <div class="de_tab tab_simple">
            <ul class="de_nav">
              <li
                [ngClass]="{ active: activeTab === tabs.Details }"
                (click)="this.activeTab = tabs.Details"
                >
                <span>Details</span>
              </li>
              <li
                [ngClass]="{ active: activeTab === tabs.Bids }"
                (click)="this.activeTab = tabs.Bids"
                >
                <span>Bids</span>
              </li>
              <li
                [ngClass]="{ active: activeTab === tabs.History }"
                (click)="this.activeTab = tabs.History"
                >
                <span>History</span>
              </li>
            </ul>

            <div class="de_tab_content">
              <div class="_tab-1" [hidden]="activeTab !== tabs.Details">
                <h6>Owner</h6>
                <div class="item_author">
                  <div class="author_list_pp">
                    <a href="author.html">
                      <img class="lazy" [src]="item.owner.avatar" alt="">
                      <i class="fa fa-check"></i>
                    </a>
                  </div>
                  <div class="author_list_info">
                    <a [routerLink]="['/', routePaths.User, item.owner.data.userId]">{{ item.owner.name }}</a>
                  </div>
                </div>

                <div class="spacer-40"></div>
                <h6>Properties</h6>
                <div class="row gx-2">
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <a href="#" class="nft_attr">
                      <h5>Background</h5>
                      <h4>Yellowish Sky</h4>
                      <span>85% have this trait</span>
                    </a>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <a href="#" class="nft_attr">
                      <h5>Eyes</h5>
                      <h4>Purple Eyes</h4>
                      <span>14% have this trait</span>
                    </a>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <a href="#" class="nft_attr">
                      <h5>Nose</h5>
                      <h4>Small Nose</h4>
                      <span>45% have this trait</span>
                    </a>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <a href="#" class="nft_attr">
                      <h5>Mouth</h5>
                      <h4>Smile Red Lip</h4>
                      <span>61% have this trait</span>
                    </a>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <a href="#" class="nft_attr">
                      <h5>Neck</h5>
                      <h4>Pink Ribbon</h4>
                      <span>27% have this trait</span>
                    </a>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <a href="#" class="nft_attr">
                      <h5>Hair</h5>
                      <h4>Pink Short</h4>
                      <span>35% have this trait</span>
                    </a>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <a href="#" class="nft_attr">
                      <h5>Accessories</h5>
                      <h4>Heart Necklace</h4>
                      <span>33% have this trait</span>
                    </a>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <a href="#" class="nft_attr">
                      <h5>Hat</h5>
                      <h4>Cute Panda</h4>
                      <span>62% have this trait</span>
                    </a>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-6">
                    <a href="#" class="nft_attr">
                      <h5>Clothes</h5>
                      <h4>Casual Purple</h4>
                      <span>78% have this trait</span>
                    </a>
                  </div>
                </div>
                <div class="spacer-30"></div>
              </div>

              <div class="_tab-2" [hidden]="activeTab !== tabs.Bids">
                <ng-container *ngFor="let bid of bids">
                  <ng-container *ngTemplateOutlet="bidTemplate; context: { bid }"></ng-container>
                </ng-container>
              </div>

              <div class="_tab-3" [hidden]="activeTab !== tabs.History">
                <ng-container *ngFor="let bid of bidsHistory">
                  <ng-container *ngTemplateOutlet="bidTemplate; context: { bid }"></ng-container>
                </ng-container>
              </div>

            </div>

            <div class="spacer-10"></div>

            <h6>Price</h6>
            <div class="nft-item-price">
              <img src="/assets/images/misc/ethereum.svg" alt="">
              <span>{{ item.price }}</span>
            </div>

            <!-- Button trigger modal -->
            <a class="btn btn-main btn-lg" (click)="buyNow()">Buy Now</a>
            &nbsp;
            <a class="btn btn-main btn-lg btn-light" (click)="placeBid()">Place a Bid</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<ng-template #bidTemplate let-bid="bid">
  <!-- <div>bid: {{ bid | json }}</div> -->
  <div class="p_list">
    <div class="p_list_pp">
      <a [routerLink]="['/', routePaths.User, bid.user.id]">
        <img class="lazy" [src]="bid.user.avatar" alt="">
        <i class="fa fa-check"></i>
      </a>
    </div>
    <div class="p_list_info">
      Bid <ng-container *ngIf="bid.accepted">accepted </ng-container> <b>{{ bid.sum }} ETH</b>
      <span>by <b>{{ bid.user.name }}</b> {{ bid.date | timeAgo }}</span> <!-- 6/15/2021, 3:20 AM -->
    </div>
  </div>
</ng-template>
